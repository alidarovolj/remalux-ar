# üßπ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

## –û–±–∑–æ—Ä —Ä–µ—à–µ–Ω–∏—è

–°–æ–∑–¥–∞–Ω —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π `ModelManager` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º TFLite –º–æ–¥–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –º–æ–¥–µ–ª–µ–π.

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **ModelManager** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏
2. **LoadedModel** - –æ–±–µ—Ä—Ç–∫–∞ –º–æ–¥–µ–ª–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º dispose
3. **MemoryStatsOverlay** - –≤–∏–∑—É–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é** - –ª–∏–º–∏—Ç—ã –∏ —Ç–∞–π–º–∞—É—Ç—ã

## üîß –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –£–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–≥—Ä—É–∑–∫–∞** —Å—Ç–∞—Ä—ã—Ö –º–æ–¥–µ–ª–µ–π –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ (2 –º–æ–¥–µ–ª–∏)
- **–¢–∞–π–º–∞—É—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö** –º–æ–¥–µ–ª–µ–π (5 –º–∏–Ω—É—Ç)
- **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π dispose** –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

### 2. –í–∏–∑—É–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Real-time —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
- **–î–µ—Ç–∞–ª–∏ –ø–æ –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏** (—Ä–∞–∑–º–µ—Ä, –¥–µ–ª–µ–≥–∞—Ç, –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏)
- **–¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–º—è—Ç–∏
- **–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π** (GC, Unload All)

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π
- **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å PerformanceProfiler

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

### –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (Visual Testing)

1. **–í–∫–ª—é—á–∏—Ç—å Memory Stats**:
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å CV Wall Painter
   - –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É Memory (üß†) –≤ –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏
   - –ü–æ—è–≤–∏—Ç—Å—è overlay —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É

2. **–ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è**:
```
–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: Models: 0/2, Total: 0MB
‚Üì
–ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å 1 ‚Üí Models: 1/2, Total: ~3MB  
‚Üì
–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –º–æ–¥–µ–ª—å 2 ‚Üí Models: 1/2, Total: ~7MB
‚Üì  
–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –º–æ–¥–µ–ª—å 3 ‚Üí Models: 1/2, Total: ~2MB
‚Üì
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–∞–º—è—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–∞, —Å—Ç–∞—Ä—ã–µ –º–æ–¥–µ–ª–∏ –≤—ã–≥—Ä—É–∂–µ–Ω—ã ‚úÖ
```

3. **–°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç**:
   - –ë—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –º–æ–¥–µ–ª–∏ 20 —Ä–∞–∑ –ø–æ–¥—Ä—è–¥
   - –ù–∞–±–ª—é–¥–∞—Ç—å: Total Memory –Ω–µ –¥–æ–ª–∂–Ω–æ —Ä–∞—Å—Ç–∏
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–µ–π: –Ω–µ –±–æ–ª–µ–µ 2
   - –¶–≤–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞: –∑–µ–ª–µ–Ω—ã–π (‚â§10MB) –∏–ª–∏ –æ—Ä–∞–Ω–∂–µ–≤—ã–π (‚â§20MB)

### –ß–µ—Ä–µ–∑ Flutter DevTools (Precise Testing)

#### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
```bash
flutter run --profile
# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
flutter pub global run devtools
```

#### –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **Memory Baseline**:
   - –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Memory tab
   - –°–¥–µ–ª–∞—Ç—å heap snapshot "Before"
   - –ó–∞–ø–æ–º–Ω–∏—Ç—å RSS memory (~30-50MB –æ–±—ã—á–Ω–æ)

2. **Model Switching Test**:
```dart
// –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
for (int i = 0; i < 10; i++) {
  // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –º–æ–¥–µ–ª–∏ –≤ —Ü–∏–∫–ª–µ
  ADE20K ‚Üí Specialized ‚Üí Mobile ‚Üí ADE20K
  // –ü–æ–¥–æ–∂–¥–∞—Ç—å 2 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è–º–∏
}
```

3. **Force Garbage Collection**:
   - –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "GC" –≤ Memory Stats overlay
   - –ò–ª–∏ –≤ DevTools: –Ω–∞–∂–∞—Ç—å "GC" –∫–Ω–æ–ø–∫—É

4. **Memory Analysis**:
   - –°–¥–µ–ª–∞—Ç—å heap snapshot "After"  
   - –°—Ä–∞–≤–Ω–∏—Ç—å heap diff
   - RSS memory –Ω–µ –¥–æ–ª–∂–Ω–æ –≤—ã—Ä–∞—Å—Ç–∏ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 10-20MB

#### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–±–ª–µ–º

üî¥ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**:
- Total Memory —Ä–∞—Å—Ç–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
- RSS –≤ DevTools —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ >50MB
- Heap diff –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ Interpreter –æ–±—ä–µ–∫—Ç–æ–≤

üü† **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è**:
- Total Memory >20MB –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
- Models –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç >2 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- RSS —Ä–∞—Å—Ç–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ

üü¢ **–ù–æ—Ä–º–∞**:
- Total Memory –∫–æ–ª–µ–±–ª–µ—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 5-15MB  
- Models: –≤—Å–µ–≥–¥–∞ ‚â§2
- RSS —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏–ª–∏ —Ä–∞—Å—Ç–µ—Ç <10MB –∑–∞ —Å–µ—Å—Å–∏—é

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ModelManager API

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```dart
final modelManager = ModelManager();

// –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å
final model = await modelManager.loadModel('wall_specialized');

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å
final output = List.filled(model.outputShape.reduce((a,b) => a*b), 0.0);
model.interpreter.run(input, output);

// –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–≥—Ä—É–∑–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â—É—é)
final newModel = await modelManager.switchToModel('wall_mobile');

// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
final stats = modelManager.getMemoryStats();
print('Loaded models: ${stats['totalModels']}');
print('Total memory: ${stats['totalSizeMB']}MB');

// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
await modelManager.forceGarbageCollection();
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã

```dart
class WallSegmentationService {
  final ModelManager _modelManager = ModelManager();
  LoadedModel? _currentModel;

  Future<void> loadModel({int modelIndex = 1}) async {
    final modelKey = _getModelKey(modelIndex);
    _currentModel = await _modelManager.loadModel(modelKey);
  }

  Future<void> switchModel(int newIndex) async {
    final modelKey = _getModelKey(newIndex);
    _currentModel = await _modelManager.switchToModel(modelKey);
  }

  void dispose() {
    _modelManager.dispose(); // –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –≤—Å–µ –º–æ–¥–µ–ª–∏
  }

  String _getModelKey(int index) {
    switch (index) {
      case 0: return 'ade20k_standard';
      case 1: return 'wall_specialized';  
      case 2: return 'wall_mobile';
      default: return 'ade20k_standard';
    }
  }
}
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

```dart
// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
final stats = ModelManager().getMemoryStats();

FirebaseAnalytics.instance.logEvent(
  name: 'memory_usage',
  parameters: {
    'total_models': stats['totalModels'],
    'total_memory_mb': stats['totalSizeMB'],
    'device_model': Platform.isAndroid ? 'android' : 'ios',
  },
);
```

### Crash Prevention

```dart
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–∞–º—è—Ç–∏
if (stats['totalSizeMB'] > 50) {
  await ModelManager().forceGarbageCollection();
  
  // –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
  FirebaseCrashlytics.instance.recordError(
    'High memory usage detected',
    null,
    fatal: false,
  );
}
```

## üéØ –ë–µ–Ω—á–º–∞—Ä–∫–∏ –∏ —Ü–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏

| –ú–æ–¥–µ–ª—å | –†–∞–∑–º–µ—Ä | –¶–µ–ª–µ–≤–æ–µ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ | –ú–∞–∫—Å–∏–º—É–º |
|--------|--------|----------------------|----------|
| **ADE20K** | 2MB | <500ms | 1s |
| **Specialized** | 3MB | <800ms | 1.5s |
| **Mobile** | 7MB | <1200ms | 2s |

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

| –°—Ü–µ–Ω–∞—Ä–∏–π | –¶–µ–ª–µ–≤–∞—è –ø–∞–º—è—Ç—å | –ú–∞–∫—Å–∏–º—É–º |
|----------|---------------|----------|
| **1 –º–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞** | 5-10MB | 15MB |
| **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π** | ¬±2MB –≤—Ä–µ–º–µ–Ω–Ω–æ | +5MB |
| **–ü–æ—Å–ª–µ 10 –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π** | –ò—Å—Ö–æ–¥–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å | +10MB |

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è

- **–í—Ä–µ–º—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è**: <1s –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –º–æ–¥–µ–ª–µ–π
- **–ü–∏–∫ –ø–∞–º—è—Ç–∏**: –º–∞–∫—Å–∏–º—É–º 2 –º–æ–¥–µ–ª–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–æ—Å—Ç–∞ –ø–∞–º—è—Ç–∏ –ø–æ—Å–ª–µ —Ü–∏–∫–ª–∞

## üêõ Troubleshooting

### –ú–æ–¥–µ–ª—å –Ω–µ –≤—ã–≥—Ä—É–∂–∞–µ—Ç—Å—è
**–°–∏–º–ø—Ç–æ–º—ã**: Models –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç >2, –ø–∞–º—è—Ç—å —Ä–∞—Å—Ç–µ—Ç
**–†–µ—à–µ–Ω–∏–µ**:
```dart
// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –≤—ã–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
await ModelManager().unloadAllModels();

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å dispose –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö
class MyService {
  @override
  void dispose() {
    ModelManager().dispose(); // –î–æ–±–∞–≤–∏—Ç—å –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
    super.dispose();
  }
}
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π
**–°–∏–º–ø—Ç–æ–º—ã**: –ó–∞–≥—Ä—É–∑–∫–∞ >2s, UI –∑–∞–≤–∏—Å–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ**:
```dart
// –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º
showDialog(
  context: context,
  builder: (_) => CircularProgressIndicator(),
);

try {
  final model = await ModelManager().loadModel(modelKey);
  Navigator.pop(context); // –ó–∞–∫—Ä—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
} catch (e) {
  Navigator.pop(context);
  // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
}
```

### –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
**–°–∏–º–ø—Ç–æ–º—ã**: >30MB –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, –∫—Ä–∞—Å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
**–†–µ—à–µ–Ω–∏–µ**:
```dart
// –£–º–µ–Ω—å—à–∏—Ç—å –ª–∏–º–∏—Ç –º–æ–¥–µ–ª–µ–π
ModelManager.maxLoadedModels = 1; // –¢–æ–ª—å–∫–æ 1 –º–æ–¥–µ–ª—å

// –£–º–µ–Ω—å—à–∏—Ç—å —Ç–∞–π–º–∞—É—Ç
ModelManager.modelTimeoutMinutes = 2; // –í—ã–≥—Ä—É–∂–∞—Ç—å —á–µ—Ä–µ–∑ 2 –º–∏–Ω

// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
await ModelManager().forceGarbageCollection();
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### –î–æ ModelManager
- ‚ùå –£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
- ‚ùå –ù–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π —Ä–æ—Å—Ç RAM
- ‚ùå –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∫—Ä—ç—à–∏ –Ω–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ü–æ—Å–ª–µ ModelManager  
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ ‚â§15MB
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø–∞–º—è—Ç—å >10MB
- [ ] Memory Stats –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç ‚â§2 –º–æ–¥–µ–ª–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ  
- [ ] Heap diff –≤ DevTools –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Ç–µ—á–µ–∫
- [ ] Stress test (50 –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π) –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç 30+ –º–∏–Ω—É—Ç

### –†–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ memory benchmarks
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ low-memory —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ crash rates –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ
- [ ] Performance regression —Ç–µ—Å—Ç—ã

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é –≥–æ—Ç–æ–≤–∞! –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É. üöÄ 